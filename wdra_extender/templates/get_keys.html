{% extends 'base.html' %}

{% block content %}
    <h1>Twitter Credentials</h1>
    <div>
        To search via the
        <a href="https://developer.twitter.com/en/docs/twitter-api/getting-started/guide" target="_blank">Twitter API</a>
        several authentication 'tokens' are required.
    </div>
    <div class="mt-1">
        To obtain these tokens, sign up for a <a href="https://developer.twitter.com/en/portal/petition/essential/basic-info" target="_blank">developer/researcher account</a>,
        follow the instructions, then return to this page.
    </div>

    <h5 class="mt-3">Set / update your credentials</h5>
    <div class="container mt-3">
        <div class="row">
            <div>
                <form action="{{ url_for('auth.get_keys_post') }}" method="POST">
                    <div class="form-group">
                        <label for="bearer_token">Bearer Token:</label>
                        <textarea type="text" class="form-control" id="bearer_token" name="bearer_token">{{ current_user.bearer_token }}</textarea>
                        <label for="consumer_key">Consumer (API) Key:</label>
                        <textarea type="text" class="form-control" id="consumer_key" name="consumer_key">{{ current_user.consumer_key }}</textarea>
                        <label for="consumer_secret">Consumer (API) Key Secret:</label>
                        <textarea type="text" class="form-control" id="consumer_secret" name="consumer_secret">{{ current_user.consumer_secret }}</textarea>
                        <label for="access_token">Access Token:</label>
                        <textarea type="text" class="form-control" id="access_token" name="access_token">{{ current_user.access_token }}</textarea>
                        <label for="access_token_secret">Access Token Secret:</label>
                        <textarea type="text" class="form-control" id="access_token_secret" name="access_token_secret">{{ current_user.access_token_secret }}</textarea>
                    </div>

                    <div class="mt-3">
                        The Twitter API provides two search methods or 'endpoints':
                    </div>
                    <ul>
                        <li>
                            <strong>Recent Search</strong> is the most common method.
                            It can retrieve tweets from the last 7 days and requires only the most basic level of API access.
                        </li>

                        <li>
                            <strong>Full Archive Search</strong> is the endpoint associated with the
                            academic research product track. It can retrieve tweets from the entire archive, but requires
                            <a href="https://developer.twitter.com/en/docs/twitter-api/getting-started/about-twitter-api#v2-access-level">
                                Academic Research API access. <strong>Only choose this method if you have and Academic Research access.</strong>
                            </a>
                        </li>
                    </ul>

                    <h6 class="mt-3">Preferred search method:</h6>
                    <div>
                        {% for endpoint in endpoints %}
                            <div class="form-group form-check">
                                <input type="checkbox" class="form-check-input" id="{{ endpoint }}_check" name="{{ endpoint }}">
                                <label class="form-check-label" for="{{ endpoint }}_check"> {{ endpoint }}</label>
                            </div>
                        {% endfor %}
                    </div>
                    <div>
                        <input class="btn btn-primary" type="submit" value="Submit">
                    </div>
                </form>
            </div>
        </div>
    </div>
{% endblock %}